# Generated by HASSL codegen
automation:
- alias: HASSL sync living_sync upstream onoff
  mode: restart
  trigger:
  - platform: state
    entity_id: light.living
  - platform: state
    entity_id: switch.living_circuit
  condition:
  - condition: template
    value_template: '{{ trigger.to_state.context.parent_id != states(''input_text.hassl_ctx__{{
      trigger_entity_id }}'') }}'
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ trigger.to_state.state == ''on'' }}'
      sequence:
      - service: input_boolean.turn_on
        target:
          entity_id: input_boolean.hassl__living_sync__onoff
    - conditions:
      - condition: template
        value_template: '{{ trigger.to_state.state != ''on'' }}'
      sequence:
      - service: input_boolean.turn_off
        target:
          entity_id: input_boolean.hassl__living_sync__onoff
- alias: HASSL sync living_sync downstream onoff
  mode: queued
  max: 1
  trigger:
  - platform: state
    entity_id: input_boolean.hassl__living_sync__onoff
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ is_state(''input_boolean.hassl__living_sync__onoff'',''on'')
          != is_state(''light.living'',''on'') }}'
      - condition: state
        entity_id: input_boolean.hassl__living_sync__onoff
        state: 'on'
      sequence:
      - service: script.hassl_write__sync_living_sync__light_living__onoff__set
      - service: light.turn_on
        target:
          entity_id: light.living
    - conditions:
      - condition: template
        value_template: '{{ is_state(''input_boolean.hassl__living_sync__onoff'',''on'')
          != is_state(''light.living'',''on'') }}'
      - condition: state
        entity_id: input_boolean.hassl__living_sync__onoff
        state: 'off'
      sequence:
      - service: script.hassl_write__sync_living_sync__light_living__onoff__set
      - service: light.turn_off
        target:
          entity_id: light.living
  - choose:
    - conditions:
      - condition: template
        value_template: '{{ is_state(''input_boolean.hassl__living_sync__onoff'',''on'')
          != is_state(''switch.living_circuit'',''on'') }}'
      - condition: state
        entity_id: input_boolean.hassl__living_sync__onoff
        state: 'on'
      sequence:
      - service: script.hassl_write__sync_living_sync__switch_living_circuit__onoff__set
      - service: switch.turn_on
        target:
          entity_id: switch.living_circuit
    - conditions:
      - condition: template
        value_template: '{{ is_state(''input_boolean.hassl__living_sync__onoff'',''on'')
          != is_state(''switch.living_circuit'',''on'') }}'
      - condition: state
        entity_id: input_boolean.hassl__living_sync__onoff
        state: 'off'
      sequence:
      - service: script.hassl_write__sync_living_sync__switch_living_circuit__onoff__set
      - service: switch.turn_off
        target:
          entity_id: switch.living_circuit
